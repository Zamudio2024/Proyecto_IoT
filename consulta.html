<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Datos</title>
  <!-- Agrega la referencia a Bootstrap (CSS y JS) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <div class="container mt-5">
    <h1>Registro de Datos</h1>
    <label for="fechaFiltro">Selecciona una fecha:</label>
    <input type="date" id="fechaFiltro" onchange="filtrarPorFecha()">
    <table class="table">
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Potenciómetro</th>
          <th>LED</th>
          <!-- Agrega más columnas según tus necesidades -->
        </tr>
      </thead>
      <tbody id="tablaDatos">
        <!-- Aquí se mostrarán los datos -->
      </tbody>
    </table>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyA_FUGnhu5nGn3pMul3RWMg9cQOPk6v7lc",
      authDomain: "prueba-invernadero.firebaseapp.com",
      databaseURL: "https://prueba-invernadero-default-rtdb.firebaseio.com",
      projectId: "prueba-invernadero",
      storageBucket: "prueba-invernadero.appspot.com",
      messagingSenderId: "28136162632",
      appId: "1:28136162632:web:a2693143d9e0075b731f7d"
    };

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);

    // Referencia a la base de datos
    const database = firebase.database();

    // Referencia a la ubicación de los datos
    const datosRef = database.ref('Invernadero/Sensores');

    // Mostrar datos en la tabla
    datosRef.on('value', (snapshot) => {
      const tablaDatos = document.getElementById('tablaDatos');
      tablaDatos.innerHTML = ''; // Limpiar la tabla antes de actualizar

      snapshot.forEach((childSnapshot) => {
        const fecha = childSnapshot.key;
        const potenciometro = childSnapshot.child('Potenciometro').val() || 'N/A';
        const led = childSnapshot.child('Actuador/Led').val() || 'N/A';

        const fila = `<tr>
                         <td>${fecha}</td>
                         <td>${potenciometro}</td>
                         <td>${led}</td>
                         <!-- Agrega más columnas según tus necesidades -->
                      </tr>`;

        tablaDatos.innerHTML += fila;
      });
    });

    // Función para filtrar datos por fecha
    function filtrarPorFecha() {
      const fechaSeleccionada = document.getElementById('fechaFiltro').value;
      const tablaDatos = document.getElementById('tablaDatos');
      tablaDatos.innerHTML = ''; // Limpiar la tabla antes de actualizar

      datosRef.child(fechaSeleccionada).once('value', (snapshot) => {
        if (snapshot.exists()) {
          const potenciometro = snapshot.child('Potenciometro').val() || 'N/A';
          const led = snapshot.child('Actuador/Led').val() || 'N/A';

          const fila = `<tr>
                           <td>${fechaSeleccionada}</td>
                           <td>${potenciometro}</td>
                           <td>${led}</td>
                           <!-- Agrega más columnas según tus necesidades -->
                        </tr>`;

          tablaDatos.innerHTML += fila;
        } else {
          alert('No hay datos disponibles para la fecha seleccionada.');
        }
      });
    }
  </script>
</body>
</html>

